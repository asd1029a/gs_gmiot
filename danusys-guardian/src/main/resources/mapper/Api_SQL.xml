<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper   PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="api">
	<resultMap type="com.danusys.web.platform.model.Api" id="api" />
	<resultMap type="com.danusys.web.platform.model.ApiParam" id="apiParam" />


	<select id="selectApi" parameterType="map" resultMap="api">
		<![CDATA[
		SELECT
			a.id,
			a.call_url as callUrl,
			a.method_type as methodType,
			a.request_body_type as requestBodyType,
			a.response_body_type as responseBodyType,
			a.api_type as apiType,
			a.target_url as targetUrl,
			a.target_path as targetPath,
			a.content_type as contentType,
			a.service_nm as serviceNm,
			a.service_prefix as servicePrefix,
			a.auth_info as authInfo
		FROM api a
		where a.call_url = #{callUrl}
		]]>
	</select>

	<select id="selectApiParam" parameterType="map" resultMap="apiParam">
		<![CDATA[
		SELECT
			ap.id,
			ap.seq,
			ap.field_nm as fieldNm,
			ap.field_map_nm as fieldMapNm,
			ap.data_type as dataType,
			ap.required,
			ap.param_type as paramType,
			ap.value,
			ap.description,
			ap.api_id as apiId
		FROM api_param ap
		WHERE ap.api_id = #{apiId}
		]]>
	</select>
</mapper>